!function(E,H,x,t){var e="accordion",a={transitionSpeed:300,transitionEasing:"ease",controlElement:"[data-control]",contentElement:"[data-content]",groupElement:"[data-accordion-group]",singleOpen:!0};function n(t,n){this.element=t,this.options=E.extend({},a,n),this._defaults=a,this._name=e,this.init()}n.prototype.init=function(){var e,a,i,o,r=this.options,n=E(this.element),t=n.find("> "+r.controlElement),s=n.find("> "+r.contentElement),c=0<n.parents("[data-accordion]").length,d={"max-height":0,overflow:"hidden"},h=function(){var t=(x.body||x.documentElement).style,n="transition";if("string"==typeof t[n])return!0;var e=["Moz","webkit","Webkit","Khtml","O","ms"];n="Transition";for(var a=0;a<e.length;a++)if("string"==typeof t[e[a]+n])return!0;return!1}();function l(t,n){n?s.css({"-webkit-transition":"",transition:""}):s.css({"-webkit-transition":"max-height "+r.transitionSpeed+"ms "+r.transitionEasing,transition:"max-height "+r.transitionSpeed+"ms "+r.transitionEasing})}function f(t){var n=0;t.children().each(function(){n+=E(this).outerHeight(!0)}),t.data("oHeight",n)}function m(t,n,e,a){var i,o=t.filter(".open").find("> [data-content]"),s=o.find("[data-accordion].open > [data-content]");r.singleOpen||(s=s.not(n.siblings("[data-accordion].open").find("> [data-content]"))),i=o.add(s),t.hasClass("open")&&i.each(function(){var t=E(this).data("oHeight");switch(a){case"+":E(this).data("oHeight",t+e);break;case"-":E(this).data("oHeight",t-e);break;default:throw"updateParentHeight method needs an operation"}E(this).css("max-height",E(this).data("oHeight"))})}function g(t){if(t.hasClass("open")){var n=t.find("> [data-content]"),e=n.find("[data-accordion].open > [data-content]"),a=n.add(e);f(a),a.css("max-height",a.data("oHeight"))}}function u(t,n){if(t.trigger("accordion.close"),h){if(c)m(t.parents("[data-accordion]"),t,n.data("oHeight"),"-");n.css(d),t.removeClass("open")}else n.css("max-height",n.data("oHeight")),n.animate(d,r.transitionSpeed),t.removeClass("open")}function p(t,n){if(t.trigger("accordion.open"),h){if(l(),c)m(t.parents("[data-accordion]"),t,n.data("oHeight"),"+");e=function(){n.css("max-height",n.data("oHeight"))},H.requestAnimationFrame?requestAnimationFrame(e):H.webkitRequestAnimationFrame?webkitRequestAnimationFrame(e):H.mozRequestAnimationFrame?mozRequestAnimationFrame(e):setTimeout(e,1e3/60),t.addClass("open")}else n.animate({"max-height":n.data("oHeight")},r.transitionSpeed,function(){n.css({"max-height":"none"})}),t.addClass("open");var e}function v(){var t=!!r.singleOpen&&0<n.parents(r.groupElement).length;f(s),t&&function(t){t.closest(r.groupElement);var n=t.siblings("[data-accordion]").filter(".open"),e=n.find("[data-accordion]").filter(".open"),a=n.add(e);a.each(function(){var t=E(this);u(t,t.find(r.contentElement))}),a.removeClass("open")}(n),n.hasClass("open")?u(n,s):p(n,s)}s.each(function(){var t=E(this);0!=t.css("max-height")&&(t.closest("[data-accordion]").hasClass("open")?(l(),f(t),t.css("max-height",t.data("oHeight"))):t.css({"max-height":0,overflow:"hidden"}))}),n.attr("data-accordion")||(n.attr("data-accordion",""),n.find(r.controlElement).attr("data-control",""),n.find(r.contentElement).attr("data-content","")),t.on("click",v),t.on("accordion.toggle",function(){if(r.singleOpen&&1<t.length)return!1;v()}),t.on("accordion.refresh",function(){g(n)}),E(H).on("resize",(e=function(){g(n)},function(){var t=this,n=arguments;o?clearTimeout(o):i&&e.apply(t,n),o=setTimeout(function(){i||e.apply(t,n),o=null},a||100)}))},E.fn[e]=function(t){return this.each(function(){E.data(this,"plugin_"+e)||E.data(this,"plugin_"+e,new n(this,t))})}}(jQuery,window,document);